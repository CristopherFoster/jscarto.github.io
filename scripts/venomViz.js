function startIt(){d3.tsv("/scripts/venom.tsv",function(t){t.forEach(function(t){t.Pain=+t.Pain,t.Minutes=+t.Minutes});var n=["Family","Species","Pain","Minutes"],e=d3.select("#viz").append("table"),a=e.append("thead"),r=e.append("tbody");a.append("tr").selectAll("th").data(n).enter().append("th").attr("align",function(t){return"Species"===t||"Minutes"===t||"Description"===t?"right":"left"}).attr("id",function(t){return t}).html(function(t){return"Pain"===t?"Pain<sup>*</sup>":"Minutes"===t?"Duration (minutes)<sup>&nbsp;</sup>":"Description"===t?"Kind or Group<sup>&nbsp;</sup>":t+"<sup>&nbsp;</sup>"});{var i=r.selectAll("tr").data(t).enter().append("tr").attr("class",function(t){return""!=t.Description?"known":void 0});i.selectAll("td").data(function(t){return n.map(function(n){return{column:n,value:t[n]}})}).enter().append("td").attr("class",function(t){return t.column}).attr("align",function(t){return"Family"==t.column?"left:":"right"}).text(function(t){return"Family"===t.column||"Species"===t.column||"Description"===t.column?t.value:void 0})}d3.selectAll("#viz").append("text").html('<strong><sup>*</sup></strong> Based on the Schmidt Pain Index [<a href="#refs">1</a>]. Hover species in <strong>bold</strong> to reveal common name or group.');var s=["#fbb4b9","#f768a1","#ae017e","#700429"],u=(d3.selectAll(".Pain").append("svg").attr("width",60).attr("height",15).attr("class","painViz"),d3.selectAll("svg.painViz"));u.data(t).each(function(t){for(var n=0;n<t.Pain;n++)d3.select(this).append("rect").attr("x",15*n).attr("y",5).attr("width",10).attr("height",10).attr("fill",s[n])});var l=d3.selectAll(".Minutes").append("svg").attr("width",130).attr("height",15).attr("class","timeViz");l.data(t).append("rect").attr("x",0).attr("y",5).attr("fill","#198c83").attr("height",15).attr("class","minBar").attr("width",function(t){return 100*t.Minutes/300}),l.append("text").attr("x",function(t){return 100*t.Minutes/300+5}).attr("y",14).text(function(t){return t.Minutes}).attr("fill","#198c83"),$(".known").tipsy({gravity:"w",html:!0,title:function(){var t=this.__data__;return'<span class="tooltip">'+t.Description+"</span>"}})})}startIt();